<mah:MetroWindow x:Class="HotelPOS.Wpf.MainWindow"
                                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                                 xmlns:local="clr-namespace:HotelPOS.Wpf"
                                 xmlns:helpers="clr-namespace:HotelPOS.Wpf.Helpers"
                                 xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
                                 xmlns:sys="clr-namespace:System.Windows;assembly=PresentationFramework"
                                 mc:Ignorable="d"
                                 Title="Mayka's Holiday Homes &amp; Cafe POS" Height="760" Width="1280"
                                 WindowStartupLocation="CenterScreen">
        <mah:MetroWindow.Resources>
                <BooleanToVisibilityConverter x:Key="BoolToVis" />
                <helpers:InverseBooleanToVisibilityConverter x:Key="InvBoolToVis" />
                <Style TargetType="GroupBox">
                        <Setter Property="Padding" Value="8" />
                </Style>
                <Style TargetType="TextBlock">
                        <Setter Property="TextOptions.TextFormattingMode" Value="Display" />
                </Style>
                <Style x:Key="IconText" TargetType="TextBlock">
                        <Setter Property="FontFamily" Value="Segoe MDL2 Assets" />
                        <Setter Property="FontSize" Value="14" />
                        <Setter Property="VerticalAlignment" Value="Center" />
                        <Setter Property="Margin" Value="0,0,8,0" />
                </Style>
                <Style x:Key="ActionButton" TargetType="Button">
                        <Setter Property="Padding" Value="12,7" />
                        <Setter Property="MinWidth" Value="96" />
                </Style>
                <Style x:Key="TinyButton" TargetType="Button">
                        <Setter Property="Width" Value="28" />
                        <Setter Property="Height" Value="26" />
                        <Setter Property="Padding" Value="0" />
                </Style>

                <Style x:Key="CardListBoxItem" TargetType="ListBoxItem">
                        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                        <Setter Property="Margin" Value="0,6,0,0" />
                        <Setter Property="Padding" Value="0" />
                </Style>

                <Style x:Key="TabHeaderText" TargetType="TextBlock">
                        <Setter Property="FontSize" Value="14" />
                        <Setter Property="FontWeight" Value="SemiBold" />
                        <Setter Property="VerticalAlignment" Value="Center" />
                </Style>
        </mah:MetroWindow.Resources>

        <Grid Margin="12">
                <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <Border Grid.Row="0" CornerRadius="10" Padding="14" Background="{DynamicResource AccentColorBrush}">
                        <Grid>
                                <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <StackPanel>
                                        <TextBlock FontSize="20" FontWeight="SemiBold" Foreground="{DynamicResource IdealForegroundColorBrush}" Text="Mayka's Holiday Homes &amp; Cafe POS" />
                                        <TextBlock Margin="0,2,0,0" Foreground="{DynamicResource IdealForegroundColorBrush}" Opacity="0.9"
                                                           Text="Fast billing · LKR currency · Print &amp; history" />
                                </StackPanel>

                                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                        <Border Background="{DynamicResource IdealForegroundColorBrush}" Opacity="0.15" CornerRadius="8" Padding="10,6" VerticalAlignment="Center" Margin="0,0,10,0">
                                                <TextBlock Foreground="{DynamicResource IdealForegroundColorBrush}" Opacity="0.95" Text="Currency: LKR" />
                                        </Border>

                                        <Border Background="{DynamicResource IdealForegroundColorBrush}" Opacity="0.15" CornerRadius="8" Padding="10,6" VerticalAlignment="Center" Margin="0,0,10,0">
                                                <TextBlock Foreground="{DynamicResource IdealForegroundColorBrush}" Opacity="0.95" Text="{Binding SystemTimeText}" />
                                        </Border>

                                        <Border Background="{DynamicResource IdealForegroundColorBrush}" Opacity="0.15" CornerRadius="8" Padding="10,6" VerticalAlignment="Center">
                                                <StackPanel Orientation="Horizontal">
                                                        <TextBlock Foreground="{DynamicResource IdealForegroundColorBrush}" Opacity="0.95" Text="Admin" Margin="0,0,10,0" />

                                                        <StackPanel Orientation="Horizontal" Visibility="{Binding IsAdminUnlocked, Converter={StaticResource InvBoolToVis}}">
                                                                <TextBox Width="120" Margin="0,0,8,0" Text="{Binding AdminPinInput, UpdateSourceTrigger=PropertyChanged}" />
                                                                <Button Padding="10,6" Content="Unlock" Command="{Binding UnlockAdminCommand}" />
                                                        </StackPanel>

                                                        <StackPanel Orientation="Horizontal" Visibility="{Binding IsAdminUnlocked, Converter={StaticResource BoolToVis}}">
                                                                <TextBlock Foreground="{DynamicResource IdealForegroundColorBrush}" Opacity="0.9" Text="Unlocked" Margin="0,0,8,0" />
                                                                <Button Padding="10,6" Content="Lock" Command="{Binding LockAdminCommand}" />
                                                        </StackPanel>
                                                </StackPanel>
                                        </Border>
                                </StackPanel>
                        </Grid>
                </Border>

                <TabControl Grid.Row="1" Margin="0,10,0,0">
                        <TabItem>
                                <TabItem.Header>
                                        <StackPanel Orientation="Horizontal">
                                                <TextBlock Style="{StaticResource IconText}" Foreground="{DynamicResource AccentColorBrush}" Text="&#xE8A7;" />
                                                <TextBlock Style="{StaticResource TabHeaderText}" Text="POS" />
                                        </StackPanel>
                                </TabItem.Header>
                                <Grid Margin="8">
                                        <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="2*" />
                                                <ColumnDefinition Width="3*" />
                                                <ColumnDefinition Width="3*" />
                                        </Grid.ColumnDefinitions>

                                        <!-- Rooms -->
                                        <GroupBox Grid.Column="0" Margin="0,0,10,0">
                                                <GroupBox.Header>
                                                        <StackPanel Orientation="Horizontal">
                                                                <TextBlock Style="{StaticResource IconText}" Foreground="{DynamicResource AccentColorBrush}" Text="&#xE8B7;" />
                                                                <TextBlock Text="Rooms" FontWeight="SemiBold" />
                                                        </StackPanel>
                                                </GroupBox.Header>
                                                <DockPanel>
                                                        <DockPanel DockPanel.Dock="Top" Margin="8,8,8,6">
                                                                <TextBlock VerticalAlignment="Center" Text="Select a room (optional)" />
                                                                <Button DockPanel.Dock="Right" Style="{StaticResource ActionButton}" Command="{Binding AddSelectedRoomToBillCommand}">
                                                                        <StackPanel Orientation="Horizontal">
                                                                                <TextBlock Style="{StaticResource IconText}" Text="&#xE8A7;" />
                                                                                <TextBlock Text="Add to bill" />
                                                                        </StackPanel>
                                                                </Button>
                                                        </DockPanel>
                                                        <Border DockPanel.Dock="Bottom" Margin="8,0,8,8" Padding="10" CornerRadius="8" Background="{DynamicResource Gray10}"
                                                                IsEnabled="{Binding IsAdminUnlocked}" >
                                                                <Grid>
                                                                        <Grid.RowDefinitions>
                                                                                <RowDefinition Height="Auto" />
                                                                                <RowDefinition Height="Auto" />
                                                                                <RowDefinition Height="Auto" />
                                                                                <RowDefinition Height="Auto" />
                                                                        </Grid.RowDefinitions>
                                                                        <Grid.ColumnDefinitions>
                                                                                <ColumnDefinition Width="*" />
                                                                                <ColumnDefinition Width="*" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Grid.Row="0" Grid.ColumnSpan="2" FontWeight="SemiBold" Text="Manage rooms" Margin="0,0,0,8" />

                                                                        <StackPanel Grid.Row="1" Grid.Column="0" Margin="0,0,8,8">
                                                                                <TextBlock Text="Room name / type" />
                                                                                <TextBox Margin="0,4,0,0" Text="{Binding RoomType, UpdateSourceTrigger=PropertyChanged}" />
                                                                        </StackPanel>
                                                                        <StackPanel Grid.Row="1" Grid.Column="1" Margin="8,0,0,8">
                                                                                <TextBlock Text="Price / day (LKR)" />
                                                                                <TextBox Margin="0,4,0,0" Text="{Binding RoomPricePerDay, UpdateSourceTrigger=PropertyChanged}" />
                                                                        </StackPanel>

                                                                        <StackPanel Grid.Row="2" Grid.Column="0" Margin="0,0,8,8">
                                                                                <TextBlock Text="Status" />
                                                                                <ComboBox Margin="0,4,0,0" SelectedItem="{Binding RoomStatus}">
                                                                                        <ComboBoxItem Content="Available" />
                                                                                        <ComboBoxItem Content="Occupied" />
                                                                                </ComboBox>
                                                                        </StackPanel>

                                                                        <StackPanel Grid.Row="2" Grid.Column="1" Margin="8,0,0,8">
                                                                                <TextBlock Text="Room code (optional)" />
                                                                                <TextBox Margin="0,4,0,0" Text="{Binding RoomCode, UpdateSourceTrigger=PropertyChanged}" />
                                                                        </StackPanel>

                                                                        <WrapPanel Grid.Row="3" Grid.ColumnSpan="2" HorizontalAlignment="Right">
                                                                                <Button Style="{StaticResource ActionButton}" Margin="0,0,8,0" Command="{Binding AddRoomCommand}">
                                                                                        <StackPanel Orientation="Horizontal">
                                                                                                <TextBlock Style="{StaticResource IconText}" Text="&#xE710;" />
                                                                                                <TextBlock Text="Add" />
                                                                                        </StackPanel>
                                                                                </Button>
                                                                                <Button Style="{StaticResource ActionButton}" Margin="0,0,8,0" Command="{Binding UpdateRoomCommand}">
                                                                                        <StackPanel Orientation="Horizontal">
                                                                                                <TextBlock Style="{StaticResource IconText}" Text="&#xE70F;" />
                                                                                                <TextBlock Text="Update" />
                                                                                        </StackPanel>
                                                                                </Button>
                                                                                <Button Style="{StaticResource ActionButton}" Margin="0,0,8,0" Command="{Binding DeleteRoomCommand}">
                                                                                        <StackPanel Orientation="Horizontal">
                                                                                                <TextBlock Style="{StaticResource IconText}" Text="&#xE74D;" />
                                                                                                <TextBlock Text="Delete" />
                                                                                        </StackPanel>
                                                                                </Button>
                                                                                <Button Style="{StaticResource ActionButton}" Command="{Binding ClearRoomFormCommand}">
                                                                                        <StackPanel Orientation="Horizontal">
                                                                                                <TextBlock Style="{StaticResource IconText}" Text="&#xE894;" />
                                                                                                <TextBlock Text="Clear" />
                                                                                        </StackPanel>
                                                                                </Button>
                                                                        </WrapPanel>
                                                                </Grid>
                                                        </Border>

                                                        <ListBox Margin="8" ItemsSource="{Binding Rooms}" SelectedItem="{Binding SelectedRoom}" ItemContainerStyle="{StaticResource CardListBoxItem}">
                                                                <ListBox.ItemTemplate>
                                                                        <DataTemplate>
                                                                                <Border CornerRadius="10" Padding="0" Background="{DynamicResource Gray10}" BorderThickness="1" BorderBrush="{DynamicResource AccentColorBrush}" Opacity="0.98">
                                                                                        <Grid>
                                                                                                <Grid.ColumnDefinitions>
                                                                                                        <ColumnDefinition Width="6" />
                                                                                                        <ColumnDefinition Width="*" />
                                                                                                        <ColumnDefinition Width="Auto" />
                                                                                                </Grid.ColumnDefinitions>

                                                                                                <Border Background="{DynamicResource AccentColorBrush}" CornerRadius="10,0,0,10" />

                                                                                                <StackPanel Grid.Column="1" Margin="10">
                                                                                                        <TextBlock FontSize="14" FontWeight="SemiBold" Text="{Binding RoomType}" />
                                                                                                        <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                                                                                                <TextBlock Opacity="0.75" Text="{Binding Status}" />
                                                                                                                <TextBlock Opacity="0.75" Text=" · " />
                                                                                                                <TextBlock Opacity="0.75" Text="{Binding PricePerDay, StringFormat=LKR {0:N2} / day}" />
                                                                                                                <TextBlock Opacity="0.75" Text=" · " />
                                                                                                                <TextBlock Opacity="0.65" Text="{Binding RoomNumber, StringFormat=Code: {0}}" />
                                                                                                        </StackPanel>
                                                                                                </StackPanel>

                                                                                                <TextBlock Grid.Column="2" Margin="10" VerticalAlignment="Center" Opacity="0.85" Foreground="{DynamicResource AccentColorBrush}"
                                                                                                                   Text="&#xE8A7;" FontFamily="Segoe MDL2 Assets" />
                                                                                        </Grid>
                                                                                </Border>
                                                                        </DataTemplate>
                                                                </ListBox.ItemTemplate>
                                                        </ListBox>
                                                </DockPanel>
                                        </GroupBox>

                                        <!-- Food -->
                                        <GroupBox Grid.Column="1" Margin="0,0,10,0">
                                                <GroupBox.Header>
                                                        <StackPanel Orientation="Horizontal">
                                                                <TextBlock Style="{StaticResource IconText}" Foreground="{DynamicResource {x:Static sys:SystemColors.InfoBrushKey}}" Text="&#xE7F8;" />
                                                                <TextBlock Text="Food" FontWeight="SemiBold" />
                                                        </StackPanel>
                                                </GroupBox.Header>
                                                <DockPanel>
                                                        <StackPanel DockPanel.Dock="Top" Margin="8,8,8,6">
                                                                <TextBlock Text="Search" />
                                                                <TextBox Margin="0,4,0,0" Text="{Binding FoodSearch, UpdateSourceTrigger=PropertyChanged}" />
                                                        </StackPanel>

                                                        <Border DockPanel.Dock="Bottom" Margin="8,0,8,8" Padding="10" CornerRadius="8" Background="{DynamicResource Gray10}"
                                                                IsEnabled="{Binding IsAdminUnlocked}">
                                                                <Grid>
                                                                        <Grid.RowDefinitions>
                                                                                <RowDefinition Height="Auto" />
                                                                                <RowDefinition Height="Auto" />
                                                                                <RowDefinition Height="Auto" />
                                                                                <RowDefinition Height="Auto" />
                                                                        </Grid.RowDefinitions>
                                                                        <Grid.ColumnDefinitions>
                                                                                <ColumnDefinition Width="*" />
                                                                                <ColumnDefinition Width="*" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Grid.Row="0" Grid.ColumnSpan="2" FontWeight="SemiBold" Text="Manage foods" Margin="0,0,0,8" />

                                                                        <StackPanel Grid.Row="1" Grid.Column="0" Margin="0,0,8,8">
                                                                                <TextBlock Text="Food name" />
                                                                                <TextBox Margin="0,4,0,0" Text="{Binding ManageFoodName, UpdateSourceTrigger=PropertyChanged}" />
                                                                        </StackPanel>

                                                                        <StackPanel Grid.Row="1" Grid.Column="1" Margin="8,0,0,8">
                                                                                <TextBlock Text="Category" />
                                                                                <TextBox Margin="0,4,0,0" Text="{Binding ManageFoodCategory, UpdateSourceTrigger=PropertyChanged}" />
                                                                        </StackPanel>

                                                                        <StackPanel Grid.Row="2" Grid.Column="0" Margin="0,0,8,8">
                                                                                <TextBlock Text="Price (LKR)" />
                                                                                <TextBox Margin="0,4,0,0" Text="{Binding ManageFoodPrice, UpdateSourceTrigger=PropertyChanged}" />
                                                                        </StackPanel>

                                                                        <WrapPanel Grid.Row="3" Grid.ColumnSpan="2" HorizontalAlignment="Right">
                                                                                <Button Style="{StaticResource ActionButton}" Margin="0,0,8,0" Command="{Binding AddFoodItemCommand}">
                                                                                        <StackPanel Orientation="Horizontal">
                                                                                                <TextBlock Style="{StaticResource IconText}" Text="&#xE710;" />
                                                                                                <TextBlock Text="Add" />
                                                                                        </StackPanel>
                                                                                </Button>
                                                                                <Button Style="{StaticResource ActionButton}" Margin="0,0,8,0" Command="{Binding UpdateFoodItemCommand}">
                                                                                        <StackPanel Orientation="Horizontal">
                                                                                                <TextBlock Style="{StaticResource IconText}" Text="&#xE70F;" />
                                                                                                <TextBlock Text="Update" />
                                                                                        </StackPanel>
                                                                                </Button>
                                                                                <Button Style="{StaticResource ActionButton}" Margin="0,0,8,0" Command="{Binding DeleteFoodItemCommand}">
                                                                                        <StackPanel Orientation="Horizontal">
                                                                                                <TextBlock Style="{StaticResource IconText}" Text="&#xE74D;" />
                                                                                                <TextBlock Text="Delete" />
                                                                                        </StackPanel>
                                                                                </Button>
                                                                                <Button Style="{StaticResource ActionButton}" Command="{Binding ClearFoodFormCommand}">
                                                                                        <StackPanel Orientation="Horizontal">
                                                                                                <TextBlock Style="{StaticResource IconText}" Text="&#xE894;" />
                                                                                                <TextBlock Text="Clear" />
                                                                                        </StackPanel>
                                                                                </Button>
                                                                        </WrapPanel>
                                                                </Grid>
                                                        </Border>

                                                        <ListBox Margin="8" ItemsSource="{Binding FilteredFoodItems}" SelectedItem="{Binding SelectedFoodItem}" ItemContainerStyle="{StaticResource CardListBoxItem}">
                                                                <ListBox.ItemTemplate>
                                                                        <DataTemplate>
                                                                                <Border CornerRadius="10" Padding="0" Background="{DynamicResource Gray10}" BorderThickness="1" BorderBrush="{DynamicResource {x:Static sys:SystemColors.InfoBrushKey}}" Opacity="0.98">
                                                                                        <Grid>
                                                                                                <Grid.ColumnDefinitions>
                                                                                                        <ColumnDefinition Width="6" />
                                                                                                        <ColumnDefinition Width="*" />
                                                                                                        <ColumnDefinition Width="Auto" />
                                                                                                </Grid.ColumnDefinitions>

                                                                                                <Border Background="{DynamicResource {x:Static sys:SystemColors.InfoBrushKey}}" CornerRadius="10,0,0,10" />

                                                                                                <StackPanel Grid.Column="1" Margin="10">
                                                                                                        <TextBlock FontSize="14" FontWeight="SemiBold" Text="{Binding FoodName}" />
                                                                                                        <TextBlock Opacity="0.75" Text="{Binding Category}" />
                                                                                                </StackPanel>

                                                                                                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center" Margin="10">
                                                                                                        <TextBlock Margin="0,0,10,0" VerticalAlignment="Center" FontWeight="SemiBold" Text="{Binding Price, StringFormat=LKR {0:N2}}" />
                                                                                                        <Button Style="{StaticResource ActionButton}" MinWidth="80" Padding="10,6"
                                                                                                                        Command="{Binding DataContext.AddFoodCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                                                                        CommandParameter="{Binding}">
                                                                                                                <StackPanel Orientation="Horizontal">
                                                                                                                        <TextBlock Style="{StaticResource IconText}" Foreground="{DynamicResource {x:Static sys:SystemColors.InfoBrushKey}}" Text="&#xE710;" />
                                                                                                                        <TextBlock Text="Add" />
                                                                                                                </StackPanel>
                                                                                                        </Button>
                                                                                                </StackPanel>
                                                                                        </Grid>
                                                                                </Border>
                                                                        </DataTemplate>
                                                                </ListBox.ItemTemplate>
                                                        </ListBox>
                                                </DockPanel>
                                        </GroupBox>

                                        <!-- Bill -->
                                        <GroupBox Grid.Column="2">
                                                <GroupBox.Header>
                                                        <StackPanel Orientation="Horizontal">
                                                                <TextBlock Style="{StaticResource IconText}" Foreground="{DynamicResource {x:Static sys:SystemColors.HighlightBrushKey}}" Text="&#xE8C7;" />
                                                                <TextBlock Text="Bill" FontWeight="SemiBold" />
                                                        </StackPanel>
                                                </GroupBox.Header>
                                                <Grid Margin="8">
                                                        <Grid.RowDefinitions>
                                                                <RowDefinition Height="*" />
                                                                <RowDefinition Height="Auto" />
                                                        </Grid.RowDefinitions>

                                                        <ListBox Grid.Row="0" ItemsSource="{Binding BillItems}" SelectedItem="{Binding SelectedBillItem}" ItemContainerStyle="{StaticResource CardListBoxItem}">
                                                                <ListBox.ItemTemplate>
                                                                        <DataTemplate>
                                                                                <Border CornerRadius="10" Padding="0" Background="{DynamicResource Gray10}" BorderThickness="1" BorderBrush="{DynamicResource {x:Static sys:SystemColors.HighlightBrushKey}}" Opacity="0.98">
                                                                                        <Grid>
                                                                                                <Grid.ColumnDefinitions>
                                                                                                        <ColumnDefinition Width="6" />
                                                                                                        <ColumnDefinition Width="*" />
                                                                                                        <ColumnDefinition Width="Auto" />
                                                                                                </Grid.ColumnDefinitions>

                                                                                                <Border Background="{DynamicResource {x:Static sys:SystemColors.HighlightBrushKey}}" CornerRadius="10,0,0,10" />

                                                                                                <StackPanel Grid.Column="1" Margin="10">
                                                                                                        <TextBlock FontSize="14" FontWeight="SemiBold" Text="{Binding ItemName}" />

                                                                                                        <StackPanel Orientation="Horizontal" Margin="0,6,0,0" VerticalAlignment="Center">
                                                                                                                <Button Style="{StaticResource TinyButton}" Content="-"
                                                                                                                                Command="{Binding DataContext.DecreaseQuantityCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                                                                                CommandParameter="{Binding}" />
                                                                                                                <TextBlock Width="44" TextAlignment="Center" VerticalAlignment="Center" FontWeight="SemiBold"
                                                                                                                           Text="{Binding Quantity}" />
                                                                                                                <Button Style="{StaticResource TinyButton}" Content="+"
                                                                                                                                Command="{Binding DataContext.IncreaseQuantityCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                                                                                CommandParameter="{Binding}" />

                                                                                                                <TextBlock Margin="12,0,0,0" VerticalAlignment="Center" Opacity="0.75"
                                                                                                                           Text="{Binding UnitPrice, StringFormat=Unit: LKR {0:N2}}" />
                                                                                                        </StackPanel>
                                                                                                </StackPanel>

                                                                                                <StackPanel Grid.Column="2" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="10">
                                                                                                        <TextBlock FontSize="14" FontWeight="SemiBold" Text="{Binding TotalPrice, StringFormat=LKR {0:N2}}" />
                                                                                                </StackPanel>
                                                                                        </Grid>
                                                                                </Border>
                                                                        </DataTemplate>
                                                                </ListBox.ItemTemplate>
                                                        </ListBox>

                                                        <Border Grid.Row="1" Padding="0,10,0,0">
                                                                <Grid>
                                                                        <Grid.RowDefinitions>
                                                                                <RowDefinition Height="Auto" />
                                                                                <RowDefinition Height="Auto" />
                                                                        </Grid.RowDefinitions>

                                                                        <DockPanel Grid.Row="0">
                                                                                <TextBlock FontSize="16" FontWeight="SemiBold" Text="Total" />
                                                                                <TextBlock DockPanel.Dock="Right" FontSize="16" FontWeight="SemiBold"
                                                                                                   Text="{Binding TotalAmount, StringFormat=LKR {0:N2}}" />
                                                                        </DockPanel>

                                                                        <WrapPanel Grid.Row="1" Margin="0,10,0,0" HorizontalAlignment="Right">
                                                                                <Button Style="{StaticResource ActionButton}" Margin="0,0,8,0" Command="{Binding PrintCurrentBillCommand}">
                                                                                        <StackPanel Orientation="Horizontal">
                                                                                                <TextBlock Style="{StaticResource IconText}" Text="&#xE749;" />
                                                                                                <TextBlock Text="Print" />
                                                                                        </StackPanel>
                                                                                </Button>
                                                                                <Button Style="{StaticResource ActionButton}" Margin="0,0,8,0" Command="{Binding NewBillCommand}">
                                                                                        <StackPanel Orientation="Horizontal">
                                                                                                <TextBlock Style="{StaticResource IconText}" Text="&#xE710;" />
                                                                                                <TextBlock Text="New" />
                                                                                        </StackPanel>
                                                                                </Button>
                                                                                <Button Style="{StaticResource ActionButton}" Margin="0,0,8,0" Command="{Binding RemoveSelectedBillItemCommand}">
                                                                                        <StackPanel Orientation="Horizontal">
                                                                                                <TextBlock Style="{StaticResource IconText}" Text="&#xE74D;" />
                                                                                                <TextBlock Text="Remove" />
                                                                                        </StackPanel>
                                                                                </Button>
                                                                                <Button Style="{StaticResource ActionButton}" Command="{Binding SaveBillCommand}">
                                                                                        <StackPanel Orientation="Horizontal">
                                                                                                <TextBlock Style="{StaticResource IconText}" Text="&#xE74E;" />
                                                                                                <TextBlock Text="Save" />
                                                                                        </StackPanel>
                                                                                </Button>
                                                                        </WrapPanel>
                                                                </Grid>
                                                        </Border>
                                                </Grid>
                                        </GroupBox>
                                </Grid>
                        </TabItem>

                        <TabItem>
                                <TabItem.Header>
                                        <StackPanel Orientation="Horizontal">
                                                <TextBlock Style="{StaticResource IconText}" Foreground="{DynamicResource {x:Static sys:SystemColors.GradientActiveCaptionBrushKey}}" Text="&#xE8EF;" />
                                                <TextBlock Style="{StaticResource TabHeaderText}" Text="Bills" />
                                        </StackPanel>
                                </TabItem.Header>
                                <Grid Margin="8">
                                        <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="2*" />
                                                <ColumnDefinition Width="3*" />
                                        </Grid.ColumnDefinitions>

                                        <GroupBox Margin="0,0,10,0">
                                                <GroupBox.Header>
                                                        <StackPanel Orientation="Horizontal">
                                                                <TextBlock Style="{StaticResource IconText}" Foreground="{DynamicResource {x:Static sys:SystemColors.GradientActiveCaptionBrushKey}}" Text="&#xE8A1;" />
                                                                <TextBlock Text="Past bills" FontWeight="SemiBold" />
                                                        </StackPanel>
                                                </GroupBox.Header>
                                                <DockPanel>
                                                        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="8,8,8,6" HorizontalAlignment="Right">
                                                                <Button Style="{StaticResource ActionButton}" Margin="0,0,8,0" Command="{Binding DeleteSelectedPastBillCommand}">
                                                                        <StackPanel Orientation="Horizontal">
                                                                                <TextBlock Style="{StaticResource IconText}" Text="&#xE74D;" />
                                                                                <TextBlock Text="Delete" />
                                                                        </StackPanel>
                                                                </Button>
                                                                <Button Style="{StaticResource ActionButton}" Command="{Binding RefreshBillsCommand}">
                                                                        <StackPanel Orientation="Horizontal">
                                                                                <TextBlock Style="{StaticResource IconText}" Text="&#xE72C;" />
                                                                                <TextBlock Text="Refresh" />
                                                                        </StackPanel>
                                                                </Button>
                                                        </StackPanel>
                                                        <ListBox Margin="8" ItemsSource="{Binding PastBills}" SelectedItem="{Binding SelectedPastBill}" ItemContainerStyle="{StaticResource CardListBoxItem}">
                                                                <ListBox.ItemTemplate>
                                                                        <DataTemplate>
                                                                                <Border CornerRadius="10" Padding="0" Background="{DynamicResource Gray10}" BorderThickness="1" BorderBrush="{DynamicResource {x:Static sys:SystemColors.GradientActiveCaptionBrushKey}}" Opacity="0.98">
                                                                                        <Grid>
                                                                                                <Grid.ColumnDefinitions>
                                                                                                        <ColumnDefinition Width="6" />
                                                                                                        <ColumnDefinition Width="*" />
                                                                                                        <ColumnDefinition Width="Auto" />
                                                                                                </Grid.ColumnDefinitions>

                                                                                                <Border Background="{DynamicResource {x:Static sys:SystemColors.GradientActiveCaptionBrushKey}}" CornerRadius="10,0,0,10" />

                                                                                                <StackPanel Grid.Column="1" Margin="10">
                                                                                                        <TextBlock FontSize="14" FontWeight="SemiBold" Text="{Binding BillNo}" />
                                                                                                        <TextBlock Margin="0,4,0,0" Opacity="0.75" Text="{Binding BillDate}" />
                                                                                                </StackPanel>

                                                                                                <TextBlock Grid.Column="2" Margin="10" FontSize="14" FontWeight="SemiBold" VerticalAlignment="Center"
                                                                                                           Text="{Binding TotalAmount, StringFormat=LKR {0:N2}}" />
                                                                                        </Grid>
                                                                                </Border>
                                                                        </DataTemplate>
                                                                </ListBox.ItemTemplate>
                                                        </ListBox>
                                                </DockPanel>
                                        </GroupBox>

                                        <GroupBox Grid.Column="1">
                                                <GroupBox.Header>
                                                        <StackPanel Orientation="Horizontal">
                                                                <TextBlock Style="{StaticResource IconText}" Foreground="{DynamicResource {x:Static sys:SystemColors.GradientInactiveCaptionBrushKey}}" Text="&#xE8C9;" />
                                                                <TextBlock Text="Bill details" FontWeight="SemiBold" />
                                                        </StackPanel>
                                                </GroupBox.Header>
                                                <DockPanel>
                                                        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="8,8,8,6" HorizontalAlignment="Right">
                                                                <Button Style="{StaticResource ActionButton}" Command="{Binding PrintSelectedPastBillCommand}">
                                                                        <StackPanel Orientation="Horizontal">
                                                                                <TextBlock Style="{StaticResource IconText}" Text="&#xE749;" />
                                                                                <TextBlock Text="Print" />
                                                                        </StackPanel>
                                                                </Button>
                                                        </StackPanel>

                                                        <ListBox Margin="8" ItemsSource="{Binding PastBillItems}" ItemContainerStyle="{StaticResource CardListBoxItem}">
                                                                <ListBox.ItemTemplate>
                                                                        <DataTemplate>
                                                                                <Border CornerRadius="10" Padding="0" Background="{DynamicResource Gray10}" BorderThickness="1" BorderBrush="{DynamicResource {x:Static sys:SystemColors.GradientInactiveCaptionBrushKey}}" Opacity="0.98">
                                                                                        <Grid>
                                                                                                <Grid.ColumnDefinitions>
                                                                                                        <ColumnDefinition Width="6" />
                                                                                                        <ColumnDefinition Width="*" />
                                                                                                        <ColumnDefinition Width="Auto" />
                                                                                                </Grid.ColumnDefinitions>
                                                                                                <Border Background="{DynamicResource {x:Static sys:SystemColors.GradientInactiveCaptionBrushKey}}" CornerRadius="10,0,0,10" />
                                                                                                <StackPanel Grid.Column="1" Margin="10">
                                                                                                        <TextBlock FontSize="14" FontWeight="SemiBold" Text="{Binding ItemName}" />
                                                                                                        <TextBlock Margin="0,4,0,0" Opacity="0.75" Text="{Binding Quantity, StringFormat=Qty: {0}}" />
                                                                                                </StackPanel>
                                                                                                <TextBlock Grid.Column="2" Margin="10" FontSize="14" FontWeight="SemiBold" VerticalAlignment="Center" Text="{Binding TotalPrice, StringFormat=LKR {0:N2}}" />
                                                                                        </Grid>
                                                                                </Border>
                                                                        </DataTemplate>
                                                                </ListBox.ItemTemplate>
                                                        </ListBox>
                                                </DockPanel>
                                        </GroupBox>
                                </Grid>
                        </TabItem>
                </TabControl>

                <Border Grid.Row="2" Margin="0,10,0,0" Padding="8,6" CornerRadius="8" Background="{DynamicResource Gray10}">
                        <DockPanel>
                                <TextBlock DockPanel.Dock="Left" FontSize="12" Opacity="0.55" Text="Developed by Udaya Chathuranga" />
                                <TextBlock DockPanel.Dock="Right" Opacity="0.8" Text="" />
                        </DockPanel>
                </Border>
        </Grid>
</mah:MetroWindow>
